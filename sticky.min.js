!function(t){window.sticky={selection:[]},$win=t(window),cloneForResize=function(t){var e=t.clone();return e[0].style.visibility="hidden",e[0].style.marginBottom="-"+e.outerHeight()+"px",e},updateContainedOffset=function(e){for(var o=e.data&&e.data.$selection?e.data.$selection:e,n=0;n<o.length;n++){for(var i=o[n],s=t(i),l=0;l<i.ev.length;l++)if("sticked"==i.ev[l].flag)var r=i.ev[l];if(r){i.$stickyClone.insertBefore(s);var f=i.$stickyClone.position();if(i.$stickyClone[0].style.width=i.$stickyClone.outerWidth()+"px",i.$stickyClone[0].style.position="absolute",i.$stickyClone[0].style.top=f.top+"px",i.$stickyClone[0].style.left=f.left+"px",i.skipDisabling)i.skipDisabling=null;else{var a=i.$stickyClone.outerHeight();i.style.marginBottom="-"+a+"px";var c=r.container.outerHeight();i.style.marginBottom="";for(var d=s.scrollEvents("get","sticked"),p=s.scrollEvents("get","contained"),v=a>c-r.offset-r.offsetBottom,e=0;e<d.length;e++)v&&!d[0].disabled&&d[e].reset&&d[e].reset(d[e]);d.length&&d[0].disabled==!v&&s.scrollEvents(v?"disable":"enable","sticked"),p.length&&p[0].disabled==!v&&s.scrollEvents(v?"disable":"enable","contained"),i.skipDisabling=!0}window.raf.on("nextframe",{$el:s},function(t){var e=t.data.$el,o=e[0];o.$stickyClone&&(e.scrollEvents("set","contained",{offset:-(r.container.outerHeight()-o.$stickyClone.position().top-o.$stickyClone.outerHeight()-r.offsetBottom)+r.offset}),o.$stickyClone.remove())})}}},resetSticky=function(e){for(var o=0;o<e.length;o++){for(var n=e[o],i=(t(n),0);i<n.ev.length;i++)if("sticked"==n.ev[i].flag)var s=n.ev[i];s&&s.reset(s)}},t.extend(t.fn,{sticky:function(e,o){var n=t(this),i=typeof e;if("update"==e&&updateContainedOffset(n),"destroy"==e&&resetSticky(n),"string"==i)return t(this).scrollEvents(e,o);var o=t.extend(!0,{container:!1,inverted:!1,offset:0,offsetBottom:0,reset:null,fixed:null,contained:null,fixedTop:null,fixedBottom:null,scrolling:null},e);if(o.inverted)n.scrollEvents({order:2,flag:"inverted sticky top",offset:o.offset,topUp:o.fixedTop,options:o}),n.scrollEvents({order:1,flag:"scrolling top",offset:o.offset,topDown:o.scrolling,options:o}),n.scrollEvents({order:1,flag:"scrolling bottom",offsetBottom:o.offsetBottom,bottomUp:o.scrolling,options:o}),n.scrollEvents({order:2,flag:"inverted sticky bottom",offsetBottom:o.offsetBottom,bottomDown:o.fixedBottom,options:o});else{for(var s=0;s<n.length;s++){var l=t(n[s]);l.scrollEvents({order:2,flag:"sticked",container:o.container,offset:o.offset,offsetBottom:o.offsetBottom,topDown:o.reset,topUp:o.fixed,reset:o.reset,options:o}),o.container&&(l[0].$stickyClone=cloneForResize(l),l.scrollEvents({order:1,flag:"contained",offset:-(o.container.outerHeight()-l.position().top-l.outerHeight()-o.offsetBottom)+o.offset,container:o.container,topDown:o.fixed,topUp:o.contained,options:o}))}o.container&&(updateContainedOffset(n),window.raf.on("afterdocumentresize",{$selection:n},updateContainedOffset))}}}),$win.on("load",function(){updateContainedOffset(t(window.sticky.selection))})}(jQuery);